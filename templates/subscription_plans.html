{% extends "base.html" %}

{% block title %}üíé Subscription Plans{% endblock %}

{% block content %}
<style>
    .subscription-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 40px 20px;
    }

    .current-plan-card {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        padding: 40px;
        border-radius: 24px;
        margin-bottom: 40px;
        box-shadow: 0 20px 60px rgba(16, 185, 129, 0.3);
    }

    .plan-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 32px;
        margin-bottom: 40px;
    }

    .plan-card {
        background: white;
        border-radius: 24px;
        padding: 32px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
        border: 3px solid transparent;
        transition: all 0.3s ease;
        position: relative;
    }

    .plan-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 16px 48px rgba(0, 0, 0, 0.12);
    }

    .plan-card.featured {
        border-color: #ec4899;
        transform: scale(1.05);
    }

    .plan-badge {
        position: absolute;
        top: -12px;
        right: 24px;
        background: linear-gradient(135deg, #ec4899, #db2777);
        color: white;
        padding: 6px 20px;
        border-radius: 24px;
        font-size: 13px;
        font-weight: 800;
    }

    .plan-icon {
        font-size: 56px;
        margin-bottom: 16px;
    }

    .plan-name {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: 8px;
    }

    .plan-price {
        font-size: 48px;
        font-weight: 900;
        margin-bottom: 8px;
    }

    .plan-period {
        color: #6b7280;
        margin-bottom: 24px;
    }

    .plan-features {
        list-style: none;
        padding: 0;
        margin: 24px 0;
    }

    .plan-features li {
        padding: 12px 0;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .feature-icon {
        color: #10b981;
        font-weight: bold;
    }

    .plan-button {
        width: 100%;
        padding: 16px;
        border-radius: 12px;
        border: none;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-upgrade {
        background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        color: white;
    }

    .btn-current {
        background: #e5e7eb;
        color: #6b7280;
        cursor: not-allowed;
    }

    .btn-downgrade {
        background: white;
        color: #8b5cf6;
        border: 2px solid #8b5cf6;
    }

    @media (max-width: 768px) {
        .subscription-container {
            padding: 80px 16px 16px;
        }

        .plan-grid {
            grid-template-columns: 1fr;
        }

        .plan-card.featured {
            transform: scale(1);
        }
    }
</style>

<div class="subscription-container">
    <!-- Current Plan Status -->
    <div class="current-plan-card">
        <h1 style="font-size: 36px; margin: 0 0 24px 0; display: flex; align-items: center; gap: 12px;">
            <span>üíé</span> My Subscription
        </h1>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 24px;">
            <div style="background: rgba(255,255,255,0.2); padding: 24px; border-radius: 16px;">
                <div style="opacity: 0.9; font-size: 14px; margin-bottom: 8px;">Status</div>
                <div style="font-size: 28px; font-weight: 700; display: flex; align-items: center; gap: 8px;">
                    <span>‚úÖ</span> Active
                </div>
            </div>

            <div style="background: rgba(255,255,255,0.2); padding: 24px; border-radius: 16px;">
                <div style="opacity: 0.9; font-size: 14px; margin-bottom: 8px;">Current Plan</div>
                <div style="font-size: 28px; font-weight: 700;">
                    {% if user and user.subscription_plan %}{{ user.subscription_plan }}{% else %}Standard US{% endif %}
                </div>
            </div>

            <div style="background: rgba(255,255,255,0.2); padding: 24px; border-radius: 16px;">
                <div style="opacity: 0.9; font-size: 14px; margin-bottom: 8px;">Valid Until</div>
                <div style="font-size: 28px; font-weight: 700;">
                    {% if user and user.subscription_expiry %}{{ user.subscription_expiry.strftime('%Y-%m-%d') }}{% else
                    %}2026-01-26{% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- All Available Plans -->
    <h2 style="text-align: center; font-size: 36px; margin-bottom: 40px;">
        üéØ Choose Your Perfect Plan
    </h2>

    <div class="plan-grid">
        <!-- FREE TRIAL -->
        <div class="plan-card" style="border-color: #10b981;">
            <div class="plan-icon">‚ö°</div>
            <div class="plan-name" style="color: #10b981;">Free Trial</div>
            <div class="plan-price" style="color: #10b981;">FREE</div>
            <div class="plan-period">3 Days Full Access</div>

            <ul class="plan-features">
                <li><span class="feature-icon">‚úì</span> All features unlocked</li>
                <li><span class="feature-icon">‚úì</span> No credit card required</li>
                <li><span class="feature-icon">‚úì</span> Pay anytime you want</li>
                <li><span class="feature-icon">‚úì</span> Cancel anytime</li>
            </ul>

            <form action="/activate_trial" method="POST">
                <button type="submit" class="plan-button"
                    style="background: linear-gradient(135deg, #10b981, #059669); color: white;">
                    Start Free Trial
                </button>
            </form>
        </div>

        <!-- MONTHLY PLAN -->
        <div class="plan-card" style="border-color: #8b5cf6;">
            <div class="plan-icon">üí≥</div>
            <div class="plan-name" style="color: #8b5cf6;">Monthly</div>
            <div class="plan-price" style="color: #8b5cf6;">$60</div>
            <div class="plan-period">Per Month</div>

            <ul class="plan-features">
                <li><span class="feature-icon">‚úì</span> Unlimited members</li>
                <li><span class="feature-icon">‚úì</span> All premium features</li>
                <li><span class="feature-icon">‚úì</span> Email support</li>
                <li><span class="feature-icon">‚úì</span> Mobile app access</li>
                <li><span class="feature-icon">‚úì</span> Export reports</li>
            </ul>

            <form action="/initiate_payment" method="POST">
                <input type="hidden" name="provider" value="stripe">
                <input type="hidden" name="plan_type" value="monthly">
                <button type="submit" class="plan-button btn-current">
                    Current Plan ‚úì
                </button>
            </form>
        </div>

        <!-- YEARLY PLAN (BEST VALUE) -->
        <div class="plan-card featured" style="border-color: #ec4899;">
            <div class="plan-badge">BEST VALUE - SAVE $120</div>
            <div class="plan-icon">üíé</div>
            <div class="plan-name" style="color: #ec4899;">Yearly</div>
            <div class="plan-price" style="color: #ec4899;">$600</div>
            <div class="plan-period">Only $50/month</div>

            <ul class="plan-features">
                <li><span class="feature-icon">‚úì</span> All Monthly features</li>
                <li><span class="feature-icon">‚úì</span> 2 months FREE (Save $120)</li>
                <li><span class="feature-icon">‚úì</span> Priority support</li>
                <li><span class="feature-icon">‚úì</span> Early access to new features</li>
                <li><span class="feature-icon">‚úì</span> Dedicated account manager</li>
            </ul>

            <form action="/initiate_payment" method="POST">
                <input type="hidden" name="provider" value="stripe">
                <input type="hidden" name="plan_type" value="yearly">
                <button type="submit" class="plan-button btn-upgrade">
                    Upgrade to Yearly üöÄ
                </button>
            </form>
        </div>
    </div>

    <!-- Pakistan Plans -->
    <div style="margin-top: 60px; padding-top: 40px; border-top: 2px solid #e5e7eb;">
        <h3 style="text-align: center; font-size: 32px; margin-bottom: 32px;">
            üáµüá∞ Pakistan Payment Methods
        </h3>

        <div class="plan-grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
            <!-- JAZZCASH -->
            <div class="plan-card" style="border-color: #ff6600;">
                <div class="plan-icon">üì±</div>
                <div class="plan-name" style="color: #ff6600;">JazzCash</div>
                <div class="plan-price" style="color: #ff6600;">Rs 5,000</div>
                <div class="plan-period">Per Month</div>

                <ul class="plan-features">
                    <li><span class="feature-icon">‚úì</span> Mobile wallet payment</li>
                    <li><span class="feature-icon">‚úì</span> Instant activation</li>
                    <li><span class="feature-icon">‚úì</span> All features included</li>
                </ul>

                <form action="/initiate_payment" method="POST">
                    <input type="hidden" name="provider" value="jazzcash">
                    <button type="submit" class="plan-button" style="background: #ff6600; color: white;">
                        Pay with JazzCash
                    </button>
                </form>
            </div>

            <!-- EASYPAISA -->
            <div class="plan-card" style="border-color: #00c853;">
                <div class="plan-icon">üíö</div>
                <div class="plan-name" style="color: #00c853;">EasyPaisa</div>
                <div class="plan-price" style="color: #00c853;">Rs 5,000</div>
                <div class="plan-period">Per Month</div>

                <ul class="plan-features">
                    <li><span class="feature-icon">‚úì</span> Mobile wallet payment</li>
                    <li><span class="feature-icon">‚úì</span> Instant activation</li>
                    <li><span class="feature-icon">‚úì</span> All features included</li>
                </ul>

                <form action="/initiate_payment" method="POST">
                    <input type="hidden" name="provider" value="easypaisa">
                    <button type="submit" class="plan-button" style="background: #00c853; color: white;">
                        Pay with EasyPaisa
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Plan Comparison -->
    <div style="margin-top: 60px; padding: 40px; background: #f9fafb; border-radius: 24px;">
        <h3 style="text-align: center; font-size: 28px; margin-bottom: 32px;">
            üìä Feature Comparison
        </h3>

        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="border-bottom: 2px solid #e5e7eb;">
                        <th style="padding: 16px; text-align: left;">Feature</th>
                        <th style="padding: 16px; text-align: center;">Free Trial</th>
                        <th style="padding: 16px; text-align: center;">Monthly</th>
                        <th style="padding: 16px; text-align: center; background: rgba(236, 72, 153, 0.1);">Yearly</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="border-bottom: 1px solid #e5e7eb;">
                        <td style="padding: 16px;">Unlimited Members</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #e5e7eb;">
                        <td style="padding: 16px;">Payment Tracking</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #e5e7eb;">
                        <td style="padding: 16px;">Mobile App (PWA)</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #e5e7eb;">
                        <td style="padding: 16px;">AI Churn Prediction</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #e5e7eb;">
                        <td style="padding: 16px;">Email Support</td>
                        <td style="padding: 16px; text-align: center;">‚ùå</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #e5e7eb;">
                        <td style="padding: 16px;">Priority Support</td>
                        <td style="padding: 16px; text-align: center;">‚ùå</td>
                        <td style="padding: 16px; text-align: center;">‚ùå</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                    </tr>
                    <tr>
                        <td style="padding: 16px;">Early Features Access</td>
                        <td style="padding: 16px; text-align: center;">‚ùå</td>
                        <td style="padding: 16px; text-align: center;">‚ùå</td>
                        <td style="padding: 16px; text-align: center;">‚úÖ</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

{% endblock %}